<!-- Template to serve notifications provided by inclusion tag -->



<div class="dropdown btn-group" id="notification_dropdown_container">
    {% if notifications.count > 0 %}
    <button class="btn position-relative" data-bs-toggle="dropdown" data-bs-target="#notification_dropdown" aria-expanded="false">
        <i class="fas fa-bell notification_icon"></i>
            <span class="badge bg-danger position-absolute start-75 top-0 translate-middle rounded-pill notification_count_icon">{{ notifications.count }}</span>
    </button>
    {% else %}
    <a href=""><i class="far fa-bell notification_icon"></i></a>
    {% endif %}
    <ul class="dropdown-menu animate__animated animate__fadeInDown" id="notification_dropdown">
        {% for notification in notifications %}
            {% if notification.related_invitation %}
                <!-- Received Invitation -->
                {% if notification.notification_type == 1 %}
                    <div class="dropdown-item">
                        <a href="#">
                            {% with notification.related_invitation.invite_sender as invite_sender %}
                                {% if invite_sender.first_name %}
                                    {{ invite_sender.first_name }} has sent you an invitation! Please respond now and meet your maker
                                {% else %}
                                    {{ invite_sender.user.username }} has sent you an invitation!
                                {% endif %}
                            {% endwith %}
                        </a>
                    </div>
                <!-- Accepted Invitation -->
                {% elif notification.notification_type == 2 %}
                    <li class="dropdown-item">
                        <a href="#">
                            {% with notification.related_invitation.invite_receiver as invite_receiver %}
                                {% if invite_receiver.first_name %}
                                    {{ invite_receiver.first_name }} has accepted your invitation!
                                {% else %}
                                    {{ invite_receiver.user.username }} has accepted your invitation!
                                {% endif %}
                            {% endwith %}
                        </a>
                    </li>
                <!-- Declined Invitation -->
                {% elif notification.notification_type == 3 %}
                    <li class="dropdown-item">
                        <a href="#">
                            {% with notification.related_invitation.invite_receiver as invite_receiver %}
                                {% if invite_receiver.first_name %}
                                    {{ invite_receiver.first_name }} has declined your invitation.
                                {% else %}
                                    {{ invite_receiver.user.username }} has declined your invitation.
                                {% endif %}
                            {% endwith %}
                        </a>
                    </li>
                <!-- Received Message -->
                {% elif notification.notification_type == 5 %}
                    <li class="dropdown-item">
                        <a href="#">
                            {% with notification.related_invitation.invite_receiver as invite_receiver %}
                                {% if invite_receiver.first_name %}
                                    {{ invite_receiver.first_name }} has sent you a message.
                                {% else %}
                                    {{ invite_receiver.user.username }} has sent you a message.
                                {% endif %}
                            {% endwith %}
                        </a>
                    </li>
                {% endif %}
            {% elif notification.related_booking %}
               <!-- Booking Details Sent -->
               {% if notification.notification_type == 4 %}
                    <li class="dropdown-item">
                        <a href="#">
                            {% with notification.related_booking.related_invitation.sender as invite_sender %}
                                {% if invite_sender.first_name %}
                                    {{ invite_sender.first_name }} has sent you booking details!
                                {% else %}
                                    {{ invite_sender.user.username }} has sent you booking details!
                                {% endif %}
                            {% endwith %}
                        </a>
                    </li>
               <!-- Received Message -->
               {% elif notification.notification_type == 5 %}
                    <li class="dropdown-item">
                        <a href="#">
                            {% with notification.related_invitation.related_booking.invite_sender as invite_sender %}
                                {% if invite_sender.first_name %}
                                    {{ invite_sender.first_name }} has sent you a message!
                                {% else %}
                                    {{ invite_sender.user.username }} has sent you a message!
                                {% endif %}
                            {% endwith %}
                        </a>
                    </li>
               {% endif %}
            {% endif %}
        {% endfor %}
    </ul>
</div>
<div id="notification_container">

</div>